CREATE DATABASE ProjectDB;

USE ProjectDB;

CREATE TABLE Client
(
  VATNUMBER VARCHAR(25) NOT NULL,
  PROJECTID INT NOT NULL,
  COMPANYNAME VARCHAR(25),
  STREET VARCHAR(50),
  CITY VARCHAR(25),
  POSTALCODE INT NOT NULL,
  COUNTRY VARCHAR(25),
  NOTE VARCHAR(400),
  PRIMARY KEY (VATNUMBER)
);

CREATE TABLE Employees
(
  CPR INT NOT NULL,
  FIRSTNAME VARCHAR(25) NOT NULL,
  LASTNAME VARCHAR(50) NOT NULL,
  CITY VARCHAR(25),
  STREET VARCHAR(50),
  POSTALCODE INT NOT NULL,
  NOTES VARCHAR(400),
  PRIMARY KEY(CPR)
);

CREATE TABLE Allocation
(
  CPR INT NOT NULL,
  VATNUMBER VARCHAR(25) NOT NULL,
  OTHERACTIVITY ENUM ('Ferie', 'Skoleopholdet', 'Sygdom', 'Ã˜vrigt', ''),
  DATEFROM DATE NOT NULL,
  KEY (DATEFROM),
  CONSTRAINT Allocation_Keys PRIMARY KEY (CPR, VATNUMBER, OTHERACTIVITY, DATEFROM),
  FOREIGN KEY (CPR) REFERENCES Employees(CPR),
  FOREIGN KEY (VATNUMBER) REFERENCES Client(VATNUMBER)
);

CREATE TABLE Dates
(
  DATEFROM DATE NOT NULL,
  DATETO DATE NOT NULL,
  CONSTRAINT Dates_Keys PRIMARY KEY (DATEFROM, DATETO),
  FOREIGN KEY (DATEFROM) REFERENCES Allocation(DATEFROM)
);
